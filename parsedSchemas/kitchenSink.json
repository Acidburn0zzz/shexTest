{
  "type": "schema",
  "prefixes": {
    "ex": "http://ex.example/#",
    "UserShape": "http://ex.example/#UserShape",
    "": "http://ex.example/#",
    "foaf": "http://xmlns.com/foaf/",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "rdf": "http://www.w3.org/1999/02/22-rdf-syntax-ns#",
    "rdfs": "http://www.w3.org/2000/01/rdf-schem#"
  },
  "startActs": [
    { "type": "semAct", "name": "http://ex.example/#foo", "code": " initializer for ignored extension " }
  ],
  "start": "http://ex.example/S1",
  "shapes": {
    "http://ex.example/S1": {
      "type": "shape",
      "expression": {
        "type": "group",
        "expressions": [
          {
            "type": "tripleConstraint",
            "predicate": "http://www.w3.org/1999/02/22-rdf-syntax-ns#type",
            "valueExpr": {
              "type": "valueClass",
              "values": [
                "http://ex.example/#Issue"
              ]
            },
            "min": 0,
            "max": 1
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://ex.example/#state",
            "valueExpr": {
              "type": "valueClass",
              "values": [
                {
                  "type": "stemRange",
                  "stem": "http://ex.example/#state",
                  "exclusions": [
                    "http://ex.example/#state_resolved"
                  ]
                }
              ]
            },
            "annotations": [
              [
                "http://www.w3.org/2000/01/rdf-schem#label",
                "\"State\""
              ],
              [
                "http://www.w3.org/2000/01/rdf-schem#description",
                "\"the sit\""
              ]
            ]
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://ex.example/#reportedBy",
            "valueExpr": {
              "type": "valueClass",
              "nodeKind": "iri",
              "reference": "http://ex.example/#UserShape"
            }
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://ex.example/#reportedOn",
            "valueExpr": {
              "type": "valueClass",
              "datatype": "http://www.w3.org/2001/XMLSchema#dateTime"
            }
          },
          {
            "type": "group",
            "expressions": [
              {
                "type": "tripleConstraint",
                "predicate": "http://ex.example/#reproducedBy",
                "valueExpr": {
                  "type": "valueClass",
                  "nodeKind": "nonliteral",
                  "reference": "http://ex.example/#EmployeeShape"
                }
              },
              {
                "type": "tripleConstraint",
                "predicate": "http://ex.example/#reproducedOn",
                "valueExpr": {
                  "type": "valueClass",
                  "datatype": "http://www.w3.org/2001/XMLSchema#dateTime"
                }
              }
            ],
            "min": 0,
            "max": 1,
            "semActs": [
              { "type": "semAct", "name": "http://ex.example/#foo", "code": " asdfasdf " }
            ]
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://ex.example/#related",
            "valueExpr": {
              "type": "valueClass",
              "reference": "http://ex.example/S1"
            },
            "min": 0, "max": "*"
          }
        ]
      }
    },
    "http://ex.example/#UserShape": {
      "type": "shape",
      "expression": {
        "type": "group",
        "expressions": [
          {
            "type": "someOf",
            "expressions": [
              {
                "type": "tripleConstraint",
                "predicate": "http://xmlns.com/foaf/name",
                "valueExpr": {
                  "type": "valueClass",
                  "datatype": "http://www.w3.org/2001/XMLSchema#string"
                }
              },
              {
                "type": "group",
                "expressions": [
                  {
                    "type": "tripleConstraint",
                    "predicate": "http://xmlns.com/foaf/givenName",
                    "valueExpr": {
                      "type": "valueClass",
                      "datatype": "http://www.w3.org/2001/XMLSchema#string"
                    },
                    "min": 1, "max": "*"
                  },
                  {
                    "type": "tripleConstraint",
                    "predicate": "http://xmlns.com/foaf/familyName",
                    "valueExpr": {
                      "type": "valueClass",
                      "datatype": "http://www.w3.org/2001/XMLSchema#string"
                    }
                  }
                ]
              }
            ]
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://xmlns.com/foaf/mbox",
            "valueExpr": {
              "type": "valueClass",
              "nodeKind": "iri",
              "pattern": "^mailto:"
            }
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://ex.example/#id",
            "valueExpr": {
              "type": "valueClass",
              "nodeKind": "bnode",
              "reference": "_:IDshape"
            }
          }
        ]
      }
    },
    "http://ex.example/#EmployeeShape": {
      "type": "shape",
      "expression": {
        "type": "group",
        "expressions": [
          {
            "type": "tripleConstraint",
            "predicate": "http://xmlns.com/foaf/givenName",
            "valueExpr": {
              "type": "valueClass",
              "datatype": "http://www.w3.org/2001/XMLSchema#string"
            },
            "min": 1, "max": "*"
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://xmlns.com/foaf/familyName",
            "valueExpr": {
              "type": "valueClass",
              "datatype": "http://www.w3.org/2001/XMLSchema#string"
            }
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://xmlns.com/foaf/phone",
            "valueExpr": {
              "type": "valueClass",
              "nodeKind": "iri"
            },
            "min": 0, "max": "*"
          },
          {
            "type": "tripleConstraint",
            "predicate": "http://xmlns.com/foaf/mbox",
            "valueExpr": {
              "type": "valueClass",
              "nodeKind": "iri"
            },
            "min": 0,
            "max": 1
          }
        ]
      }
    },
    "_:IDshape": {
      "type": "shape",
      "virtual": true,
      "expression": {
        "type": "someOf",
        "expressions": [
          {
            "type": "group",
            "expressions": [
              {
                "type": "tripleConstraint",
                "predicate": "http://ex.example/#code",
                "valueExpr": {
                  "type": "valueClass",
                  "nodeKind": "literal"
                }
              },
              {
                "type": "tripleConstraint",
                "predicate": "http://ex.example/#system",
                "valueExpr": {
                  "type": "valueClass",
                  "nodeKind": "iri"
                }
              },
              {
                "type": "tripleConstraint",
                "predicate": "http://ex.example/#literal",
                "valueExpr": {
                  "type": "valueClass",
                  "values": [
                    "\"a\"",
                    "\"b\"^^http://ex.example/#c",
                    "\"c\"@en",
                    "\"d\"@en-fr"
                  ]
                },
                "min": 2,
                "max": 3
              },
              {
                "type": "tripleConstraint",
                "negated": true,
                "predicate": "http://ex.example/#misc",
                "valueExpr": {
                  "type": "valueClass",
                  "nodeKind": "bnode"
                },
                "semActs": [
                  { "type": "semAct", "name": "http://ex.example/#foo", "code": " ignored "},
                  { "type": "semAct", "name": "http://ex.example/#bar", "code": " also ignored " }
                ]
              }
            ]
          },
          {
            "type": "group",
            "expressions": [
              {
                "type": "group",
                "expressions": [
                  {
                    "type": "tripleConstraint",
                    "inverse": true,
                    "predicate": "http://ex.example/#ref",
                    "valueExpr": {
                      "type": "valueClass",
                      "values": [
                        "\"true\"^^http://www.w3.org/2001/XMLSchema#boolean",
                        "\"false\"^^http://www.w3.org/2001/XMLSchema#boolean"
                      ]
                    }
                  },
                  {
                    "type": "tripleConstraint",
                    "inverse": true,
                    "negated": true,
                    "predicate": "http://ex.example/#miscRef",
                    "valueExpr": {
                      "type": "valueClass"
                    }
                  }
                ]
              },
              {
                "type": "tripleConstraint",
                "predicate": "http://ex.example/#issues",
                "valueExpr": {
                  "type": "valueClass",
                  "reference": "http://ex.example/#S1"
                },
                "min": 0, "max": "*"
              },
              {
                "type": "tripleConstraint",
                "predicate": "http://ex.example/#seeAlso",
                "valueExpr": {
                  "type": "valueClass",
                  "reference": "http://ex.example/#S1"
                },
                "min": 0, "max": "*"
              },
              {
                "type": "tripleConstraint",
                "predicate": "http://ex.example/#says",
                "valueExpr": {
                  "type": "valueClass",
                  "reference": "http://ex.example/#EmployeeShape"
                },
                "min": 0, "max": "*"
              }
            ]
          }
        ]
      }
    },
    "http://ex.example/#FooID": {
      "type": "shape",
      "closed": true,
      "inherit": [
        "_:IDshape"
      ],
      "extra": [
        "http://ex.example/#code",
        "http://ex.example/#system"
      ]
    }
  }
}
